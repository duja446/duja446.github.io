<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Clojure - Working With Immutable Data Structures | Duja446 Blog</title><link rel=canonical href=https://duja446.github.io/posts/2022-12-18-clojure-working-with-immutable-data-structures/><meta name=description content="This is my tech/programming blog where I post about new and interesting programming topics and technologies."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Clojure - Working With Immutable Data Structures"><meta property="og:description" content="Recursion Insted of for/while I hate looping through a list in a language like JavaScript, because this creates imperative code that has side effects. Recursive functions may be difficult to read at first but with enough practice they become easier to read then imperative functions created with loops. Here is an example of how to build a sum function recursivly
1(defn sum 2 ([vals] (sum vals 0)) 3 ([vals accumulating-total] 4 (if (?"><meta property="og:type" content="article"><meta property="og:url" content="https://duja446.github.io/posts/2022-12-18-clojure-working-with-immutable-data-structures/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-18T19:01:09+01:00"><meta property="article:modified_time" content="2022-12-18T19:01:09+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Clojure - Working With Immutable Data Structures"><meta name=twitter:description content="Recursion Insted of for/while I hate looping through a list in a language like JavaScript, because this creates imperative code that has side effects. Recursive functions may be difficult to read at first but with enough practice they become easier to read then imperative functions created with loops. Here is an example of how to build a sum function recursivly
1(defn sum 2 ([vals] (sum vals 0)) 3 ([vals accumulating-total] 4 (if (?"><link rel=stylesheet href=https://duja446.github.io/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://duja446.github.io/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-DQG750WZEB","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://duja446.github.io/posts/2022-12-18-clojure-pure-functions/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://duja446.github.io/posts/2022-12-18-clojure-pure-functions-powers/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&text=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&title=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&is_video=false&description=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures&body=Check out this article: https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&title=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&title=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&name=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures&description=Recursion%20Insted%20of%20for%2fwhile%20I%20hate%20looping%20through%20a%20list%20in%20a%20language%20like%20JavaScript%2c%20because%20this%20creates%20imperative%20code%20that%20has%20side%20effects.%20Recursive%20functions%20may%20be%20difficult%20to%20read%20at%20first%20but%20with%20enough%20practice%20they%20become%20easier%20to%20read%20then%20imperative%20functions%20created%20with%20loops.%20Here%20is%20an%20example%20of%20how%20to%20build%20a%20sum%20function%20recursivly%0a1%28defn%20sum%202%20%28%5bvals%5d%20%28sum%20vals%200%29%29%203%20%28%5bvals%20accumulating-total%5d%204%20%28if%20%28%3f" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&t=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#recursion-insted-of-forwhile>Recursion Insted of for/while</a></li><li><a href=#function-composition-instead-of-attribute-mutation>Function Composition Instead of Attribute Mutation</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Clojure - Working With Immutable Data Structures</h1><div class=meta><div class=postdate><time datetime="2022-12-18 19:01:09 +0100 +0100" itemprop=datePublished>2022-12-18</time></div><div class=article-read-time><i class="far fa-clock"></i>
1 minute read</div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/clojure rel=tag>clojure</a></div></div></header><div class=content itemprop=articleBody><h2 id=recursion-insted-of-forwhile>Recursion Insted of for/while</h2><p>I hate looping through a list in a language like JavaScript, because this creates imperative
code that has side effects. Recursive functions may be difficult to read at first but with
enough practice they become easier to read then imperative functions created with loops.
Here is an example of how to build a sum function recursivly</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-clojure data-lang=clojure><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(<span style=color:#8be9fd;font-style:italic>defn </span><span style=color:#8be9fd;font-style:italic>sum</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>  ([<span style=color:#8be9fd;font-style:italic>vals</span>] (<span style=color:#50fa7b>sum</span> <span style=color:#8be9fd;font-style:italic>vals </span><span style=color:#bd93f9>0</span>))
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>  ([<span style=color:#8be9fd;font-style:italic>vals </span><span style=color:#8be9fd;font-style:italic>accumulating-total</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    (<span style=color:#ff79c6>if </span>(<span style=color:#50fa7b>?empty</span> <span style=color:#8be9fd;font-style:italic>vals</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>      <span style=color:#8be9fd;font-style:italic>accumulating-total</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>      (<span style=color:#50fa7b>sum</span> (<span style=color:#8be9fd;font-style:italic>rest </span><span style=color:#8be9fd;font-style:italic>vals</span>) (<span style=color:#8be9fd;font-style:italic>+ </span>(<span style=color:#8be9fd;font-style:italic>first </span><span style=color:#8be9fd;font-style:italic>vals</span>) <span style=color:#8be9fd;font-style:italic>accumulating-total</span>)))))
</span></span></code></pre></div><p>When writing recursive functions in Clojure <code>recur</code> should be used to provide optimization to the function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-clojure data-lang=clojure><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(<span style=color:#8be9fd;font-style:italic>defn </span><span style=color:#8be9fd;font-style:italic>sum</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>  ([<span style=color:#8be9fd;font-style:italic>vals</span>] (<span style=color:#50fa7b>sum</span> <span style=color:#8be9fd;font-style:italic>vals </span><span style=color:#bd93f9>0</span>))
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>  ([<span style=color:#8be9fd;font-style:italic>vals </span><span style=color:#8be9fd;font-style:italic>accumulating-total</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    (<span style=color:#ff79c6>if </span>(<span style=color:#50fa7b>empty?</span> <span style=color:#8be9fd;font-style:italic>vals</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>      <span style=color:#8be9fd;font-style:italic>accumulating-total</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>      (<span style=color:#50fa7b>recur</span> (<span style=color:#8be9fd;font-style:italic>rest </span><span style=color:#8be9fd;font-style:italic>vals</span>) (<span style=color:#8be9fd;font-style:italic>+ </span>(<span style=color:#8be9fd;font-style:italic>first </span><span style=color:#8be9fd;font-style:italic>vals</span>) <span style=color:#8be9fd;font-style:italic>accumulating-total</span>)))))
</span></span></code></pre></div><p>This recuring won&rsquo;t in fact create thousands of intermediate values because Clojure&rsquo;s immutable
data structures are implemented using <em>structural sharing</em> which allows it to efficiently create
new versions of data structures that share some of the same structure as the original data structure.</p><h2 id=function-composition-instead-of-attribute-mutation>Function Composition Instead of Attribute Mutation</h2><p>Function composition is the practice of combining functions in such a way that the return value
of one function is passed as an argument to another. With this technique we can craft complex
functions from simple ones. This also decouples data from functions making functions easier to
use and adapt.</p></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#recursion-insted-of-forwhile>Recursion Insted of for/while</a></li><li><a href=#function-composition-instead-of-attribute-mutation>Function Composition Instead of Attribute Mutation</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&text=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&title=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&is_video=false&description=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures&body=Check out this article: https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&title=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&title=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&name=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures&description=Recursion%20Insted%20of%20for%2fwhile%20I%20hate%20looping%20through%20a%20list%20in%20a%20language%20like%20JavaScript%2c%20because%20this%20creates%20imperative%20code%20that%20has%20side%20effects.%20Recursive%20functions%20may%20be%20difficult%20to%20read%20at%20first%20but%20with%20enough%20practice%20they%20become%20easier%20to%20read%20then%20imperative%20functions%20created%20with%20loops.%20Here%20is%20an%20example%20of%20how%20to%20build%20a%20sum%20function%20recursivly%0a1%28defn%20sum%202%20%28%5bvals%5d%20%28sum%20vals%200%29%29%203%20%28%5bvals%20accumulating-total%5d%204%20%28if%20%28%3f" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fduja446.github.io%2fposts%2f2022-12-18-clojure-working-with-immutable-data-structures%2f&t=Clojure%20-%20Working%20With%20Immutable%20Data%20Structures" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Duja446 Blog</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script></html>